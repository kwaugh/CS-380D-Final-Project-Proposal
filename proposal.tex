\documentclass[10pt,twocolumn,letterpaper]{article}

\usepackage{cvpr}
\usepackage{times}
\usepackage{epsfig}
\usepackage{graphicx}
\usepackage{amsmath}
\usepackage{amssymb}

% Include other packages here, before hyperref.

% If you comment hyperref and then uncomment it, you should delete
% egpaper.aux before re-running latex.  (Or just hit 'q' on the first latex
% run, let it finish, and you should be clear).
\usepackage[breaklinks=true,bookmarks=false]{hyperref}

\cvprfinalcopy

\def\cvprPaperID{****} % *** Enter the CVPR Paper ID here
\def\httilde{\mbox{\tt\raisebox{-.5ex}{\symbol{126}}}}

\setcounter{page}{1}
\begin{document}

%%%%%%%%% TITLE
\title{CS 380D Distributed Systems Final Project Proposal}

\author{Keivaun Waugh\\
University of Texas at Austin\\
{\tt\small keivaunwaugh@utexas.com}
\and
Paul Choi\\
University of Texas at Austin\\
{\tt\small choipaul96@gmail.com}
\and
Jo Bridgwater\\
University of Texas at Austin\\
{\tt\small jobridgwater@utexas.edu}
}

\maketitle

\begin{abstract}
    In this project, we aim to evaluate the performance of CockroachDB on top of
    PebblesDB. The open source version of CockroachDB currently available is
    built on top of RocksDB. PebblesDB is a key-value store developed at UT
    that has some performance trade-offs with RocksDB, with its main
    contribution being its faster write performance. In addition to measuring
    the performance change, we will investigate what changes, if any, need to
    be made to PebblesDB to increase the performance of CockroachDB.
\end{abstract}

\section{Introduction}
CockroachDB is a distributed SQL database with strong consistency guarantees.
CockroachDB offers many enhancements on top of a traditional key-value store
including replication and recovery as well as other standard features that are
provided by a database frontend. By replacing RocksDB, the current key-value
store base that CockroachDB builds on top of, with PebblesDB, we aim to see if
the performance increases that PebblesDB brings can also be brought to
CockroachDB in a distributed setting.

RocksDB is a key-value store built using a log-structured merge tree, which
exploits the relatively higher speed of sequential disk I/O by making writes to
disk append-only. This is achieved using sstables, which accumulate sorted data
in memory before being written to files on the disk. This system has low write
latency at the cost of higher read latency, since reads often have to search
through files to reach their target key. This downside is alleviated somewhat
by periodically compacting these files into fewer, larger files (which has
overhead of its own). The improvements of LevelDB and HyperLevelDB (upon which
RocksDB is based) over the original BigTable LSM implementation are chiefly
optimizations of this compaction algorithm.

PebblesDB is also a key-value store based on HyperLevelDB, but it further
further improves latency by using a fragmented log-structured merge tree which
is meant to reduce write amplification.

%------------------------------------------------------------------------------

\section{Technical Plan}
Our contributions will be three-fold. Because CockroachDB does not have a clear
separation of logic between its use of RocksDB as a key-value store and its
other functions, we will evaluate the practicality of refactoring the
CockroachDB repository to allow for a clear separation. This will make it
easier in the future to evaluate other key-value stores as bases under
CockroachDB. Additionally, because PebblesDB and RocksDB do not share the same
API (PebblesDB shares an interface with LevelDB, however), we will write a shim
layer to perform API translation. RocksDB was built on work from LevelDB, so it
is likely that they share a comparable API, but we have not yet evaluated their
API compatibility. This approach appears to be more straightforward than
modifying CockroachDB directly to use the new API.

Finally, we will try to optimize PebblesDB to make CockroachDB work faster on
top of it. In the case where this involves smaller changes, we will submit them
as a pull request to the PebblesDB project. If larger changes are forthcoming,
we will create a fork of PebblesDB for the new version resulting from them.

%------------------------------------------------------------------------------

\section{Evaluation Plan}
It will be essential in our evaluation not just to measure CockroachDB's
performance on top of PebblesDB, but also to compare it to its performance on
top of RocksDB. In order to do so, we will use the widely used Yahoo! Cloud
Serving Benchmark (YCBM). We will also look for other benchmarks that are
commonly used to evaluate database performance and run them on both systems if
we find that they address an area which YCBM does not. We will take care to
investigate any differences in performance on write-, update-, read-, and
delete-heavy workloads as well as write-amplification we find and reason about
their causes. We will also use these benchmarks to measure the performance
improvements we achieve with any optimizations we might make on CockroachDB or
the underlying.

\section{Materials}
In order to perform a thorough evaluation, we will need access to multiple
machines with SSDs to test the distributed performance of CockroachDB. SSDs are
required since RocksDB and PebblesDB attempt to optimize their writes for SSDs
since their write granularity is more coarse than that of an HDD. We would like
to explore the use of either existing test machines in the UT systems lab or
machines on a cloud hosting provider possibly using credits donated to the
class by Google, Amazon, etc.

%------------------------------------------------------------------------------

\end{document}
